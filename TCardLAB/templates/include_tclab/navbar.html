{% load wagtailcore_tags wagtailimages_tags %}

{# make stream field https://www.coderedcorp.com/blog/customizable-navbars-in-wagtail/ #}

<!-- Navbar -->
<nav class="navbar navbar-expand-sm navbar-dark py-sm" id="mainNav">
	<div class="container">
		<a class="navbar-brand text-uppercase text-expanded font-weight-bold d-sm-none" href="{% slugurl 'home' %}">TCardLAB</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarResponsive">
			<ul class="navbar-nav mx-auto">
				<li class="nav-item px-sm-4"> <!--active-->
					<a class="nav-link text-uppercase text-expanded" href="{% slugurl 'home' %}">Home
						<span class="sr-only">(current)</span>
					</a>
        		</li>

        		<!--<li class="nav-item active px-lg-4">-->
				<li class="nav-item dropdown px-sm-4">
					<a class="nav-link text-uppercase text-expanded dropdown-toggle" href="#" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	                Blogs</a>
	                <div class="dropdown-menu m-0" aria-labelledby="dropdownMenuLink">
		                <a class="dropdown-item" href="{% slugurl 'sci-log' %}">Sci-Log</a>
		                <a class="dropdown-item" href="{% slugurl 'pro-log' %}">Pro-Log</a>
		                <a class="dropdown-item" href="{% slugurl 'misc-blog' %}">Misc. Blog</a>
	                </div>
				</li>

				<li class="nav-item px-sm-4">
					<a class="nav-link text-uppercase text-expanded" href="#">Store</a>
				</li>

				<li class="nav-item px-sm-4">
					<a class="nav-link text-uppercase text-expanded" href="{% slugurl 'about' %}">About</a>
				</li>

			<hr class="dropdown-divider" style="border-color: rgb(75,75,75);">

			<li class="nav-item dropdown d-sm-none px-sm-4">
    			<a class="nav-link text-uppercase text-expanded dropdown-toggle" href="#" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Login</a>
    			<div class="dropdown-menu d-sm-none">
				  <form class="px-4 py-3">
				    <div class="form-group">
				      <label for="exampleDropdownFormEmail1">Email address</label>
				      <input type="email" class="form-control" id="exampleDropdownFormEmail1" placeholder="email@example.com">
				    </div>
				    <div class="form-group">
				      <label for="exampleDropdownFormPassword1">Password</label>
				      <input type="password" class="form-control" id="exampleDropdownFormPassword1" placeholder="Password">
				    </div>
				    <div class="form-check">
				      <input type="checkbox" class="form-check-input" id="dropdownCheck">
				      <label class="form-check-label" for="dropdownCheck">
				        Remember me
				      </label>
				      <button type="submit" class="btn btn-inline btn-primary" style="float:right;">Sign in</button>
				    </div>
				  </form>
				  <div class="dropdown-divider"></div>
				  <a class="dropdown-item" href="#">Register</a>
				  <a class="dropdown-item" href="#">Forgot password?</a>
				</div>
			</li>
			</ul>

			<hr class="d-sm-none">

			<form class="form-inline d-sm-none"
			action="{% url 'search' %}" method="get">
		    	<input class="form-control" type="search" 

		    	name="query"{% if search_query %} value="{{ search_query }}"{% endif %}

		    	placeholder="Search" aria-label="Search" id= "navsearch">
		    	<button class="btn btn-outline-light" type="submit">Search</button>
		    </form>


		</div>
	</div>
</nav>


<!--   Fix this up later!!!   -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script type="text/javascript">
  //   $(document).ready(function () {
		// $('.navbar li a').click(function(e) {
		//     $('.navbar li.active').removeClass('active');
		//     var $this = $(this);
		//     if (!$this.hasClass('active')) {
		//         $this.addClass('active');
		//     }
		//     //e.preventDefault();
		// });
  //   });

	// $('body').delegate('.navbar li a', 'click', function(){
	//     var $thisLi = $(this).parents('li:first');
	//     var $ul = $thisLi.parents('ul:first');
	//     if (!$thisLi.hasClass('active')){
	//         $ul.find('li.active').removeClass('active');
	//         $thisLi.addClass('active');
	//     }
	// });

	$(document).ready(function() {
	  $('li.active').removeClass('active');
	  $('a[href="' + location.pathname + '"]').closest('li').addClass('active'); 
	  $('a[href="' + location.pathname + '"]').closest('a').addClass('active'); 
	});
</script>
